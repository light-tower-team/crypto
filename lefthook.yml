pre-push:
  parallel: true
  commands:
    type-check:
      tags: type check
      glob: "*.{ts,tsx}"
      run: "./node_modules/.bin/tsc --noEmit"
    eslint:
      tags: lint
      files: git diff --name-only --diff-filter=d origin/master...HEAD
      glob: "*.{ts,tsx}"
      run: ./node_modules/.bin/eslint --report-unused-disable-directives --max-warnings 0 {files}
    prettier:
      tags: format
      files: git diff --name-only --diff-filter=d origin/master...HEAD
      glob: "*.{ts,tsx}"
      run: ./node_modules/.bin/prettier --check {files}

auto-fix:
  parallel: true
  commands:
    style-errors:
      tags: style-errors
      files: git diff --name-only --diff-filter=d origin/master...HEAD
      glob: "*.{ts,tsx}"
      run: "./node_modules/.bin/eslint --fix {files} && ./node_modules/.bin/prettier --write --list-different {files}"
